<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VAZy ‚Äì Under Development</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<style>
.animate-fadeIn {animation: fadeIn 1s forwards;}
.delay-200 {animation-delay:0.2s;}
@keyframes fadeIn {from {opacity:0; transform: translateY(10px);} to {opacity:1; transform: translateY(0);}}
</style>

<body class="bg-gradient-to-b from-gray-900 to-gray-800 text-gray-100 min-h-screen">

<!-- ================= LOGIN SCREEN ================= -->
<div id="loginScreen" class="flex flex-col items-center justify-center min-h-screen px-6">
  <div class="bg-gray-800 p-8 rounded-xl shadow-xl w-full max-w-sm">
    <h2 class="text-2xl font-bold mb-4 text-center">Login</h2>

    <input id="loginUser" type="text" placeholder="Username" class="mb-3 p-3 w-full bg-gray-900 rounded-lg">
    <input id="loginPass" type="password" placeholder="Password" class="mb-3 p-3 w-full bg-gray-900 rounded-lg">

    <button id="loginBtn" class="w-full bg-blue-600 hover:bg-blue-700 p-3 rounded-lg font-bold">
      Log In
    </button>

    <div id="adminCreateSection" class="mt-4 text-center">
      <button id="createAdminBtn" class="w-full bg-yellow-500 hover:bg-yellow-600 p-2 rounded-md font-bold">
        Create Admin Account
      </button>
    </div>

    <p id="loginMsg" class="text-red-400 text-center mt-3"></p>
  </div>
</div>

<!-- ================= MAIN SITE CONTENT ================= -->
<div id="mainContent" class="hidden min-h-screen">

  <!-- ADMIN MENU -->
  <div id="adminMenu" class="hidden fixed top-0 left-0 w-full bg-black/90 text-white p-4 flex justify-between shadow-xl z-50 border-b border-gray-700">
    <span class="font-bold text-lg text-yellow-400">‚öôÔ∏è ADMIN PANEL</span>

    <div class="flex gap-2 text-sm flex-wrap">
      <button id="dashboardBtn" class="bg-blue-600 px-4 py-2 rounded">Dashboard</button>
      <button id="usersBtn" class="bg-purple-600 px-4 py-2 rounded">Users</button>
      <button id="logBtn" class="bg-amber-500 px-4 py-2 rounded">Logs</button>
      <button id="announceBtn" class="bg-green-600 px-4 py-2 rounded">Announcements</button>
      <button id="settingsBtn" class="bg-indigo-600 px-4 py-2 rounded">Settings</button>
      <button id="toggleSiteBtn" class="bg-red-600 px-4 py-2 rounded">Close Site</button>
      <button id="maintBtn" class="bg-orange-600 px-4 py-2 rounded">Maintenance OFF</button>
      <button id="clearAllBtn" class="bg-red-700 px-3 py-2 rounded text-xs">Clear All</button>
      <button id="logoutBtn" class="bg-gray-700 px-4 py-2 rounded">Logout</button>
    </div>
  </div>

  <!-- MAIN PAGE AFTER LOGIN -->
  <div id="pageContent" class="pt-24 text-center px-4">
    <h1 class="text-5xl font-extrabold mb-2 animate-fadeIn text-yellow-300">VAZy</h1>
    <p class="text-lg text-gray-300 animate-fadeIn delay-200">üöß Coming January 2026</p>

    <div id="announcementBox" class="mt-6 text-xl text-green-400"></div>

    <!-- USER DASHBOARD SECTION -->
    <div id="userDashboard" class="hidden mt-12 bg-gray-800/70 p-6 rounded-2xl max-w-md mx-auto shadow-lg">
      <h2 class="text-2xl font-bold mb-4 text-blue-400">üë§ User Dashboard</h2>
      <p class="text-gray-200 mb-2"><span class="font-semibold">Username:</span> <span id="userNameText"></span></p>
      <p class="text-gray-200 mb-2"><span class="font-semibold">Last Login:</span> <span id="lastLoginText"></span></p>
      <button id="logoutBtnUser" class="mt-4 bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded">Logout</button>
    </div>

    <!-- WELCOME MESSAGE -->
    <div class="mt-12 text-gray-200">
      <h2 class="text-2xl font-bold mb-4">Welcome to VAZy</h2>
      <p class="text-gray-300 max-w-xl mx-auto">
        This is your main page, visible only after login.  
        Admins can manage users, announcements, and site state.  
        Regular users can see announcements and their personal dashboard.
      </p>
    </div>
  </div>

</div>

<script>
/*** LOCAL STORAGE KEYS:
  admin, adminPass
  user, pass
  loggedIn = "admin" / "user"
  siteClosed = true/false
  maint = true/false
  logs = JSON text
  announcements = string
  lastLoginUser = date
***/

// ==== LOGGER ====
const log = (txt) => {
  const logs = JSON.parse(localStorage.getItem("logs") || "[]");
  logs.push(new Date().toLocaleString() + " ‚Äî " + txt);
  localStorage.setItem("logs", JSON.stringify(logs));
};

// ==== ADMIN CREATE ====
if (localStorage.getItem("admin")) {
  document.getElementById("createAdminBtn").disabled = true;
  document.getElementById("createAdminBtn").classList.add("opacity-50","cursor-not-allowed");
}

createAdminBtn?.addEventListener("click", () => {
  if (localStorage.getItem("admin")) return alert("Admin already exists!");
  const u = prompt("Set Admin username:");
  const p = prompt("Set Admin password:");
  if (!u || !p) return alert("Need both!");
  localStorage.setItem("admin", u);
  localStorage.setItem("adminPass", p);
  log("Admin Created");
  alert("‚úÖ Admin created!");
  location.reload();
});

// ==== LOGIN ====
loginBtn.onclick = () => {
  const u = loginUser.value.trim(), p = loginPass.value.trim();
  if (!u || !p) return (loginMsg.textContent = "Enter username and password!");

  // Admin login
  if (u === localStorage.getItem("admin") && p === localStorage.getItem("adminPass")) {
    localStorage.setItem("loggedIn","admin");
    log("Admin logged in");
    location.reload();
    return;
  }

  // User login (auto create)
  if (!localStorage.getItem("user")) {
    localStorage.setItem("user", u);
    localStorage.setItem("pass", p);
    log("User created");
  }

  if (u === localStorage.getItem("user") && p === localStorage.getItem("pass")) {
    localStorage.setItem("loggedIn","user");
    localStorage.setItem("lastLoginUser", new Date().toLocaleString());
    log("User logged in");
    location.reload();
  } else {
    loginMsg.textContent = "‚ùå Wrong credentials";
  }
};

// ==== LOAD ====
function load() {
  const role = localStorage.getItem("loggedIn");
  const closed = localStorage.getItem("siteClosed") === "true";
  const maint = localStorage.getItem("maint") === "true";

  // if not logged in ‚Üí only login screen
  if (!role) {
    loginScreen.classList.remove("hidden");
    mainContent.classList.add("hidden");
    return;
  }

  // logged in ‚Üí show main page
  loginScreen.classList.add("hidden");
  mainContent.classList.remove("hidden");

  // Announcements
  const ann = localStorage.getItem("announcements");
  if (ann) announcementBox.textContent = "üì¢ " + ann;

  if (role === "admin") {
    adminMenu.classList.remove("hidden");
    maintBtn.textContent = maint ? "Maintenance ON" : "Maintenance OFF";
  }

  // USER dashboard
  if (role === "user") {
    document.getElementById("userDashboard").classList.remove("hidden");
    document.getElementById("userNameText").textContent = localStorage.getItem("user");
    document.getElementById("lastLoginText").textContent = localStorage.getItem("lastLoginUser") || "First time!";
  }

  if (closed && role !== "admin") {
    document.body.innerHTML = "<div class='text-center mt-48 text-3xl'>üö´ Site closed by Admin</div>";
  }

  if (maint && role !== "admin") {
    document.body.innerHTML = "<div class='text-center mt-48 text-3xl'>üõ†Ô∏è Maintenance Mode</div>";
  }
}
load();

// ==== BUTTONS ====
logoutBtn?.addEventListener("click",()=>{ localStorage.removeItem("loggedIn"); location.reload(); });
document.getElementById("logoutBtnUser")?.addEventListener("click",()=>{ localStorage.removeItem("loggedIn"); location.reload(); });

toggleSiteBtn?.addEventListener("click",()=>{
  const cur = localStorage.getItem("siteClosed")==="true";
  localStorage.setItem("siteClosed", !cur);
  log("Toggled site");
  location.reload();
});
maintBtn?.addEventListener("click",()=>{
  const cur = localStorage.getItem("maint")==="true";
  localStorage.setItem("maint", !cur);
  log("Maintenance toggled");
  location.reload();
});
usersBtn?.addEventListener("click",()=>{
  alert(`üë§ USERS:\nUser: ${localStorage.getItem("user")}\nAdmin: ${localStorage.getItem("admin")}`);
});
logBtn?.addEventListener("click",()=>{
  alert("üóíÔ∏è Logs:\n\n" + (JSON.parse(localStorage.getItem("logs")||"[]").join("\n")));
});
dashboardBtn?.addEventListener("click",()=>{
  alert("üìä Dashboard Coming Soon!");
});
announceBtn?.addEventListener("click",()=>{
  const newAnn = prompt("Enter announcement text:");
  if (newAnn !== null) {
    localStorage.setItem("announcements", newAnn);
    log("Announcement updated");
    alert("üì¢ Announcement set!");
    location.reload();
  }
});
settingsBtn?.addEventListener("click",()=>{
  alert("‚öôÔ∏è Settings Coming Soon!");
});
clearAllBtn?.addEventListener("click",()=>{
  if(confirm("‚ö†Ô∏è DELETE ALL accounts, logs, settings?")){
    localStorage.clear();
    location.reload();
  }
});
</script>

</body>
</html>
